basePath: /
definitions:
  models.ErrorResponseModel:
    properties:
      code:
        type: integer
      message:
        type: string
    type: object
  models.PACRequestModel:
    properties:
      pid:
        example: DmIq8x2JNs+E2qGBr16LxP6lUK+i/5nJRLuzvYEymtY=
        type: string
      signed_pid:
        example: fzLD1/PAJoq7EtWqIXLOYMhxNJCK9L4w4yniXZSxu0r3+oZ84jreOAhAIlrodSdg0/4EaKYWLmyf0D0uD0eozzwhvVYPDZIrLSxllH+HeEWWuOm1hnPVOOUwo7G4ROemojqwNQ6uvSB+AxoAPiSfm01Rgi0BPoaH9X8H6r94O9Hm3ZrgA9zoxQhMTx/eDpsW2yNbfPFXd18IAuHqLJSCBOSl3U4PfHEad3xFw6H04s2hr3Rqlsb2WsJmS6rf0mPEPAKjq1fSvBIcxg6PCJdfw/GhZEByrP0qc5DllkYSYZaddM/pAh+8LA16YmN1eO9VthsQxGt/WHma/5xsChOaCMd+fgk+Yjio56LoHrC86SqKsS4gkfa2jZoyagwNCah/nKAQkeVzQjk5+WLdCfMh71v82lw9L3rwlng2KhLC4z19k7wheoKQipJaxFR72T7PDftt1TvttK5q6F8x+sV6cTC6roRkgZG03X4tgLJrkBLjF9w3KbcKhPzLyu9ehYtTqFe9hBuR11UXirTi96bvmT9wWDVoTxv+ZGvn59e0VLBcQp67W2m3CZgmIs5eksQPhsFufRwYq49kXxFqnX5OZdqmVVhbQM8X9b8dTpgxd+tIuPzrYcG3ts5ApPCdXMoM/s1Tp6x+QQtq6uOD44V5v5E9tHd9GAH5cYKDfPvdA/w=
        type: string
    required:
    - pid
    - signed_pid
    type: object
  models.PACResponseModel:
    properties:
      expiration:
        example: "2024-12-31T23:59:59Z"
        type: string
      pac:
        example: 874532
        type: integer
    type: object
  models.PACVerificationRequestModel:
    properties:
      pac:
        example: 874532
        type: integer
      pid:
        example: DmIq8x2JNs+E2qGBr16LxP6lUK+i/5nJRLuzvYEymtY=
        type: string
    required:
    - pac
    - pid
    type: object
  models.PACVerificationResponseModel:
    properties:
      expiration:
        example: "2024-12-31T23:59:59Z"
        type: string
      valid:
        example: true
        type: boolean
    type: object
  models.PIDRequestModel:
    properties:
      public_key:
        example: abc123def456ghci78
        type: string
    required:
    - public_key
    type: object
  models.PIDResponseModel:
    properties:
      message:
        example: PID successfully issued and saved
        type: string
      pid:
        example: a1b2c3d4-e5f6-7890-1234-567890abcdef
        type: string
    type: object
  models.SACRequestModel:
    properties:
      signed_sid:
        example: signed_sid_payload_base64
        type: string
    type: object
  models.SACResponseModel:
    properties:
      sac:
        example: abc123def456ghci78
        type: string
    type: object
host: localhost:8888
info:
  contact:
    email: m.dinelli@unibo.it
    name: Michele Dinelli
  description: API specification for the Authenticated Anonymity Architecture (AAA),
    a blockchain-based solution providing robust and ethical authenticated anonymous
    identities with deanonymization capabilities for criminal activity cases.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  title: National Identity Provider (NIP)
  version: 0.0.1
paths:
  /v1/auth/pac:
    post:
      consumes:
      - application/json
      description: Allows a user to request a Public Authentication Code (PAC) from
        the NIP. It's used to authenticate the user as an identified user in the system
        without sharing any information about her identity. The user sends a message
        to the NIP containing `SIGN(PID, SK)`, namely the PID signed with the private
        key of the public-private key pair used to obtain the PID. The NIP verifies
        that the user is indeed the key holder and returns the PAC, saving it in its
        local repository. When logging onto the public service, the user can show
        the PAC, and the service has only to query the NIP to verify that the code
        is associated with an authenticated user.
      parameters:
      - description: PAC Request Model
        in: body
        name: models.PACRequestModel
        required: true
        schema:
          $ref: '#/definitions/models.PACRequestModel'
      produces:
      - application/json
      responses:
        "200":
          description: The Public Authentication Code
          schema:
            $ref: '#/definitions/models.PACResponseModel'
        "400":
          description: Bad request
          schema:
            $ref: '#/definitions/models.ErrorResponseModel'
        "404":
          description: Not found
          schema:
            $ref: '#/definitions/models.ErrorResponseModel'
        "500":
          description: An error occurred
          schema:
            $ref: '#/definitions/models.ErrorResponseModel'
      summary: PAC issuance request
      tags:
      - auth
  /v1/auth/sac:
    post:
      consumes:
      - application/json
      description: The SAC (Secret Authentication Code) is a one-time code used to
        authenticate the user as an anonymous user, at the same time guaranteeing
        that a real user—one that has been registered within the system—exists behind
        the anonymous identity. To obtain the SAC, the user queries the NIP by sending
        a message containing `ENC(SID, SK)`, i.e., her SID signed with the private
        key associated with the public key saved on the blockchain at the moment of
        seed phrase creation and used in the record where the SID was stored. The
        NIP retrieves the SID record from the blockchain and checks that it was actually
        signed by that user via the PK saved in the record. This certifies that the
        user is the true owner of that SID.
      parameters:
      - description: SAC Request Model
        in: body
        name: models.SACRequestModel
        required: true
        schema:
          $ref: '#/definitions/models.SACRequestModel'
      produces:
      - application/json
      responses:
        "200":
          description: The Secret Authentication Code
          schema:
            $ref: '#/definitions/models.SACResponseModel'
        "400":
          description: Bad request
          schema:
            $ref: '#/definitions/models.ErrorResponseModel'
        "500":
          description: An error occurred
          schema:
            $ref: '#/definitions/models.ErrorResponseModel'
      summary: SAC issuance request
      tags:
      - auth
  /v1/auth/verify-pac:
    post:
      consumes:
      - application/json
      description: Allows a user to verify a PAC (Public Authentication Code) for
        services accepting an authenticated anonymous identity.
      parameters:
      - description: PAC Verification Request Model
        in: body
        name: models.PACVerificationRequestModel
        required: true
        schema:
          $ref: '#/definitions/models.PACVerificationRequestModel'
      produces:
      - application/json
      responses:
        "200":
          description: The Public Authentication Code Verification Response
          schema:
            $ref: '#/definitions/models.PACVerificationResponseModel'
        "400":
          description: Bad request
          schema:
            $ref: '#/definitions/models.ErrorResponseModel'
        "404":
          description: Not found
          schema:
            $ref: '#/definitions/models.ErrorResponseModel'
        "500":
          description: An error occurred
          schema:
            $ref: '#/definitions/models.ErrorResponseModel'
      summary: PAC verification request
      tags:
      - auth
  /v1/identity/pid:
    post:
      consumes:
      - application/json
      description: The NIP issues a Public Identity Data (PID), i.e., an anonymous
        token that identifies the user without explicitly sharing information, saves
        it on its local database, and shares it with the user. The real identity of
        the user is carried by the PID alone, since it has been officially issued
        by an NIP that verified the identity of the user. Additionally, the NIP will
        be the only one able to connect a PID to the real information of the respective
        user.
      parameters:
      - description: PID Request Model
        in: body
        name: models.PIDRequestModel
        required: true
        schema:
          $ref: '#/definitions/models.PIDRequestModel'
      produces:
      - application/json
      responses:
        "200":
          description: The PID
          schema:
            $ref: '#/definitions/models.PIDResponseModel'
        "400":
          description: Bad request
          schema:
            $ref: '#/definitions/models.ErrorResponseModel'
        "500":
          description: An error occurred
          schema:
            $ref: '#/definitions/models.ErrorResponseModel'
      summary: PID issuance request
      tags:
      - identity
schemes:
- http
- https
swagger: "2.0"
